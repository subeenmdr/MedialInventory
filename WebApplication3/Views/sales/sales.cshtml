@model WebApplication3.Models.salesmodel.DTO
@using System.Collections.Concurrent

@{
    ViewBag.Title = "addsales";
}
<head>

    <link href="@Url.Content("~/Content")/jquery-ui.css" rel="stylesheet" />
    <script src="@Url.Content("~/Content")/jquery-ui.js"></script>
</head>

<div class="container">
    <div class="row">
        <div class="col-sm-12 col-md-10 col-md-offset-3">
            <h2>Sales Medical</h2>

            @*<form method="post" class="form-horizontal">
                <div class="form-group">
                    <label for="" class="control-label col-xs-2">Produt Name</label>
                    <div class="col-xs-10">
                        @Html.TextBox("productname", null, new { @class = "form-control" })
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="control-label col-xs-2">Stock</label>
                    <div class="col-xs-10">
                        @Html.TextBox("stock",null,new {@readonly="readonly"})
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="control-label col-xs-2">Price</label>
                    <div class="col-xs-10">
                        @Html.TextBox("price", null, new { @readonly = "readonly",@class="form-control" })
                        
                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="control-label col-xs-2">Expiry date</label>
                    <div class="col-xs-10">
                        @Html.TextBox("expDate", null, new { @readonly = "readonly" })

                    </div>
                </div>
                <div class="form-group">
                    <label for="" class="control-label col-xs-2">Quantity</label>
                    <div class="col-xs-10">
                        @Html.TextBox("qty" ,null, new { @class = "form-control" })
                    </div>
                </div>

                
            </form>*@
           
            </div>
        <form method="post">
            <table id="mytable" class="table table-striped table-bordered" cellspacing="0" width="100%">

                <thead>
                    <tr>
                        <th>SN</th>
                        <th>Product Name</th>
                        <th> Price</th>
                        <th>Expiry date</th>
                        <th>Quantity</th>
                        <th>Stock</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    
                        @Html.EditorFor(x => x.ListOfSales)
                    



                </tbody>

            </table>
            <div class="form-group">
                <div class="col-md-offset-3 col-xs-8">
                    <input type="button" value="Add" class="btn btn-primary" id="btnAddSales" />
                    <input type="submit" value="Save" class="btn btn-primary" />

                </div>
            </div>
            
                
        </form>
    </div>
</div>



    <script type="text/javascript">
        $(document).ready(function () {
            
            $("#btnAddSales").on("click", function () {
                $.ajax({
                    url: '/Sales/AddSales',
                    type: 'Get',
                    success: function (r) {
                        $("#mytable tbody").append(r);
                    }
                });
            });

            @*$('.AutoProductName').autocomplete({
                        source: '@Url.Action("Search","sales")'
                    });

            $(".AutoProductName").on('blur',function (e) {
                alert();
                var product = $(this);
                        $.ajax({
                            url: "/sales/GetStock",
                            method:"Get",
                            datatype: "json",
                            data: { productName: $(this).val() },
                            success: function(result) {
                                $(product).closest('tr').find("#stock").val(result.stock);
                                $(product).closest('tr').find("#Price").val(result.price);
                                $(product).closest('tr').find("#ExpireDate").val(new Date(result.expDate));

                            }
                            
                            
                        });
                    });*@
                });
             </script>
